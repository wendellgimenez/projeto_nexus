{% extends 'core/base.html' %}  <!-- Estende o template base do projeto -->
{% load static %}  <!-- Carrega a biblioteca de arquivos estáticos -->
{% load custom_filters %}  <!-- Carrega filtros personalizados para uso no template -->

{% block extra_css %}  <!-- Bloco para incluir CSS extra específico para esta página -->
<link rel="stylesheet" href="{% static 'css/gerencial-assessoria.css' %}">  <!-- Link para o arquivo CSS específico -->
{% endblock %}

{% block content %} <!-- Bloco principal de conteúdo da página -->
<div class="container mt-4"> <!-- Container principal com margem superior -->
    <h2>Gerencial Assessoria</h2> <!-- Título da página -->

    <!-- Navbar de abas -->
    <ul class="nav nav-tabs justify-content-center custom-nav-tabs" id="myTab" role="tablist">
        <li class="nav-item" role="presentation"> <!-- Item da aba para Escritórios Liberta -->
            <a class="nav-link active" id="escritorios-tab" data-toggle="tab" href="#escritorios" role="tab" aria-controls="escritorios" aria-selected="true">Escritórios Liberta</a>
        </li>
        <li class="nav-item" role="presentation"> <!-- Item da aba para Metas Escritório -->
            <a class="nav-link" id="metas-tab" data-toggle="tab" href="#metas" role="tab" aria-controls="metas" aria-selected="false">Metas Escritório</a>
        </li>
        <li class="nav-item" role="presentation"> <!-- Item da aba para Matriz de Receitas -->
            <a class="nav-link" id="matriz-tab" data-toggle="tab" href="#matriz" role="tab" aria-controls="matriz" aria-selected="false">Matriz de Receitas</a>
        </li>
        <li class="nav-item" role="presentation"> <!-- Item da aba para Repasses Contratuais -->
            <a class="nav-link" id="repasses-tab" data-toggle="tab" href="#repasses" role="tab" aria-controls="repasses" aria-selected="false">Repasses Contratuais</a>
        </li>
    </ul>

    <!-- Conteúdo das abas -->
    <div class="tab-content mt-3"> <!-- Container para o conteúdo das abas, com margem superior -->
        <!-- Aba Escritórios Liberta -->
        <div class="tab-pane fade show active" id="escritorios" role="tabpanel" aria-labelledby="escritorios-tab">
            <div>
                <h3>Escritórios Liberta</h3> <!-- Título da aba Escritórios Liberta -->
            </div>
            <div class="mb-3"> <!-- Espaço abaixo do botão -->
                {% if request.user.profile.user_level == 'Master' or request.user.profile.user_level == 'Gerencial' %} <!-- Verifica o nível do usuário -->
                <button type="button" class="btn btn-success" data-toggle="modal" data-target="#escritorioModal"> <!-- Botão para cadastrar um novo escritório -->
                    Cadastrar Escritório
                </button>
                {% endif %}
            </div>
        
            <div class="form-group"> <!-- Grupo de formulário para filtro -->
                <label for="filtro-periodo-escritorio">Filtrar por Período:</label> <!-- Rótulo do filtro -->
                <select id="filtro-periodo-escritorio" class="form-control filtro-periodo-select" onchange="filtrarPorPeriodoEscritorio(this.value)"> <!-- Seleção de filtro por período -->
                    {% for periodo in opcoes_periodo_escritorio %} <!-- Loop para preencher opções de períodos -->
                    <option value="{{ periodo|date:"Y-m-d" }}" {% if periodo == filtro_periodo_escritorio %}selected{% endif %}> <!-- Opção selecionada se corresponder ao filtro -->
                        {{ periodo|date:"M/Y"|lower }} <!-- Formatação da data para M/Y -->
                    </option>
                    {% endfor %}
                </select>
            </div>
        
            <table class="table table-striped table-bordered full-width-table matriz-receitas-table"> <!-- Tabela para exibir dados dos escritórios -->
                <thead>
                    <tr>
                        <th>Data de Referência</th> <!-- Cabeçalho da coluna de Data de Referência -->
                        <th>Código do Escritório</th> <!-- Cabeçalho da coluna de Código do Escritório -->
                        <th>Nome do Escritório</th> <!-- Cabeçalho da coluna de Nome do Escritório -->
                        <th>Impostos</th> <!-- Cabeçalho da coluna de IRPJ -->
                        <th>Criação/Edição</th> <!-- Cabeçalho da coluna de Criação/Edição -->
                        <th>Último Editor</th> <!-- Cabeçalho da coluna de Último Editor -->
                        {% if request.user.profile.user_level == 'Master' %} <!-- Verifica se o usuário é do nível Master para mostrar a coluna de Ações -->
                        <th>Ações</th>
                        {% endif %}
                    </tr>
                </thead>
                <tbody>
                    {% for escritorio in escritorios %} <!-- Loop para exibir cada escritório -->
                    <tr data-id="{{ escritorio.1 }}"> <!-- Linha da tabela para um escritório, com ID associado -->
                        <td>{{ escritorio.0|date:"M/Y"|lower }}</td> <!-- Data formatada para a coluna de Data de Referência -->
                        <td><input type="text" class="form-control codigo" value="{{ escritorio.1 }}" readonly></td> <!-- Campo para o Código do Escritório, somente leitura -->
                        <td><input type="text" class="form-control nome" value="{{ escritorio.2 }}" readonly></td> <!-- Campo para o Nome do Escritório, somente leitura -->
                        <td>
                            <!-- Cria um grupo de entrada (input group) que contém o campo de entrada de texto e o símbolo de porcentagem (%) -->
                            <div class="input-group" style="align-items: center;">
                                <!-- Campo de entrada para o valor do IRPJ, formatado como porcentagem e definido como somente leitura -->
                                <input type="text" class="form-control ir" value="{{ escritorio.3|format_percentage }}" readonly style="height: calc(1.5em + .75rem + 2px);">
                                
                                <!-- Adiciona um elemento de texto para exibir o símbolo de porcentagem (%) após o campo de entrada -->
                                <div class="input-group-append">
                                    <span class="input-group-text" style="height: calc(1.3em + .75rem + 2px); padding-top: 0; padding-bottom: 0;">%</span>
                                </div>
                            </div>
                        </td>
                        <td>{{ escritorio.4|date:"d/m/Y H:i" }}</td> <!-- Data formatada para Criação/Edição -->
                        <td>{{ escritorio.5|default:"N/A" }}</td> <!-- Último Editor, padrão "N/A" se não houver -->
                        {% if request.user.profile.user_level == 'Master' %} <!-- Verifica se o usuário é do nível Master para mostrar os botões de Ações -->
                        <td>
                            <button type="button" class="btn btn-warning btn-sm editar-btn-escritorio">Editar</button> <!-- Botão para editar -->
                            <button type="button" class="btn btn-success btn-sm salvar-btn-escritorio d-none" data-url="{% url 'editar_escritorio' %}">Salvar</button> <!-- Botão para salvar alterações, inicialmente oculto -->
                            <button type="button" class="btn btn-secondary btn-sm cancelar-btn-escritorio d-none">Cancelar</button> <!-- Botão para cancelar alterações, inicialmente oculto -->
                            <button type="button" class="btn btn-danger btn-sm excluir-btn-escritorio" data-url="{% url 'excluir_escritorio' %}" data-id="{{ escritorio.1 }}">Excluir</button> <!-- Botão para excluir escritório -->
                        </td>
                        {% endif %}
                    </tr>
                    {% empty %} <!-- Caso não haja escritórios encontrados -->
                    <tr>
                        <td colspan="{% if request.user.profile.user_level == 'Master' %}7{% else %}6{% endif %}">Nenhum escritório encontrado para o período selecionado.</td> <!-- Mensagem informando que nenhum escritório foi encontrado -->
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

        <!-- Aba Metas Escritórios - Container principal para a seção de metas -->
        <div class="tab-pane fade" id="metas" role="tabpanel" aria-labelledby="metas-tab">
            <!-- Cabeçalho da seção -->
            <div>
                <h3>Metas Escritório</h3> <!-- Título da aba Metas Escritório -->
            </div>

            <!-- Container para filtros e ações -->
            <div class="mb-3 d-flex align-items-center">
                <!-- Formulário de seleção de ano com submissão automática -->
                <form method="get" class="d-inline-block mb-0">
                    <div class="form-group d-inline-block mb-0">
                        <label for="ano" class="sr-only">Ano:</label>
                        <!-- Dropdown para seleção do ano com evento onchange para submit automático -->
                        <select id="ano" name="ano" class="form-control" onchange="this.form.submit()">
                            <option value="">Selecione o Ano</option>
                            <!-- Loop através dos anos disponíveis -->
                            {% for ano in anos %}
                            <option value="{{ ano }}" {% if ano == ano_selecionado %}selected{% endif %}>{{ ano }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </form>
                <!-- Botão de geração de ano novo - visível apenas para usuários Master ou Gerencial -->
                {% if request.user.profile.user_level == 'Master' or request.user.profile.user_level == 'Gerencial' %}
                <button type="button" class="btn btn-success ml-2" data-toggle="modal" data-target="#gerarAnoModal">
                    Gerar Ano
                </button>
                {% endif %}
            </div>

            <!-- Tabela de exibição das metas -->
            <table class="table table-striped table-bordered full-width-table matriz-receitas-table">
                <!-- Cabeçalho da tabela -->
                <thead>
                    <tr>
                        <th>Período</th>
                        <th>Meta ROA</th>
                        <th>Meta NPS</th>
                        <th style="white-space: nowrap;">Data de Criação/Edição</th>
                        <th>Usuário</th>
                        <!-- Coluna de ações visível apenas para usuários Master -->
                        {% if request.user.profile.user_level == 'Master' %}
                        <th>Ações</th>
                        {% endif %}
                    </tr>
                </thead>

                <!-- Corpo da tabela -->
                <tbody>
                    <!-- Loop através das metas -->
                    {% for meta in metas %}
                    <tr data-id="{{ meta.id }}">
                        <!-- Campos de entrada readonly para exibição dos dados -->
                        <td><input type="text" class="form-control periodo" value="{{ meta.periodo }}" readonly></td>
                        <td>
                            <div class="input-group" style="align-items: center;">
                                <input type="text" class="form-control meta_roa" value="{{ meta.meta_roa|multiply:100|floatformat:2 }}" readonly>
                                <div class="input-group-append">
                                    <span class="input-group-text" style="height: calc(1.3em + .75rem + 2px); padding-top: 0; padding-bottom: 0;">%</span>
                                </div>
                            </div>
                        </td>
                        <td>
                            <div class="input-group" style="align-items: center;">
                                <input type="text" class="form-control meta_nps" value="{{ meta.meta_nps|multiply:100|floatformat:2 }}" readonly>
                                <div class="input-group-append">
                                    <span class="input-group-text" style="height: calc(1.3em + .75rem + 2px); padding-top: 0; padding-bottom: 0;">%</span>
                                </div>
                            </div>
                        </td>
                        <!-- Data de atualização formatada -->
                        <td>{{ meta.updated_at|date:"d/m/Y H:i" }}</td>
                        <!-- Informação do usuário que criou/editou -->
                        <td>
                            {% if meta.updated_by %}
                                {{ meta.updated_by.username }} (Editado)
                            {% else %}
                                {{ meta.created_by.username }} (Criado)
                            {% endif %}
                        </td>
                        <!-- Botões de ação visíveis apenas para usuários Master -->
                        {% if request.user.profile.user_level == 'Master' %}
                        <td>
                            <div class="btn-group" role="group" aria-label="Ações">
                                <!-- Botões para edição, salvamento, cancelamento e exclusão -->
                                <button type="button" class="btn btn-warning btn-sm editar-btn btn-primary">Editar</button>
                                <button type="button" class="btn btn-success btn-sm salvar-btn d-none">Salvar</button>
                                <button type="button" class="btn btn-secondary btn-sm cancelar-btn d-none">Cancelar</button>
                                <button type="button" class="btn btn-danger btn-sm excluir-btn" data-toggle="modal" data-target="#excluirMetaModal" data-id="{{ meta.id }}">Excluir</button>
                            </div>
                        </td>
                        {% endif %}
                    </tr>
                    {% empty %}
                    <!-- Linha exibida quando não há metas cadastradas -->
                    <tr>
                        <td colspan="{% if request.user.profile.user_level == 'Master' %}6{% else %}5{% endif %}" class="text-center">Nenhuma meta encontrada.</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>

            <!-- Definição das URLs para as operações de edição e exclusão via JavaScript -->
            <script>
                const editarMetaUrl = "{% url 'editar_meta' %}";
                const excluirMetaUrl = "{% url 'excluir_meta' %}";
            </script>
        </div>

        <!-- Aba Matriz de Receitas -->
        <div class="tab-pane fade" id="matriz" role="tabpanel" aria-labelledby="matriz-tab">
            <!-- Título da seção -->
            <h3>Matriz de Receitas</h3>
        
            <!-- Formulário de Pesquisa -->
            <form method="get" action="">
                <div class="d-flex align-items-center mb-3">
                    <!-- Campo de busca -->
                    <input type="text" name="search" value="{{ search_query }}" placeholder="Pesquisar..." class="form-control mr-2" style="max-width: 300px;">
                    <!-- Botão de pesquisa -->
                    <button type="submit" class="btn btn-primary ml-2">Pesquisar</button>
                    <!-- Botão "Adicionar Linha" visível para usuários com nível Master ou Gerencial -->
                    {% if request.user.profile.user_level == 'Master' or request.user.profile.user_level == 'Gerencial' %}
                    <button id="btnAdicionarLinha" class="btn btn-primary ml-2" data-bs-toggle="modal" data-bs-target="#addLineModal">Adicionar Linha</button>
                    {% endif %}
                </div>
            </form>

            <!-- Tabela com opções de filtro e conteúdo da Matriz de Receitas -->
            <div class="container-fluid">
                <div class="table-responsive">
                    <!-- Formulário de Filtro -->
                    <form method="get" id="filtroForm">
                        <table class="table table-striped table-bordered full-width-table matriz-receitas-table">
                            <thead>
                                <tr>
                                    <!-- Cabeçalhos e seletores para filtros de dados -->
                                    <th>
                                        Data Referência
                                        <div class="form-group">
                                            <select id="filtro_periodo" name="filtro_periodo" class="form-control" onchange="handleDropdownChange()">
                                                <option value="">Todos os Períodos</option>
                                                {% for data in opcoes_periodo %}
                                                    <option value="{{ data|date:'Y-m-d' }}" {% if data|date:'Y-m-d' == filtro_periodo %}selected{% endif %}>
                                                        {{ data|date:"d/m/Y" }}
                                                    </option>
                                                {% endfor %}
                                            </select>
                                        </div>
                                    </th>
                                    <!-- Similar configuração para os outros filtros -->
                                    <!-- Coluna Relatório XP -->
                                    <th>
                                        Relatório XP
                                        <div class="form-group">
                                            <select id="filtro_xp" name="filtro_xp" class="form-control" onchange="handleDropdownChange()">
                                                <option value="">Todos</option>
                                                {% for opcao in opcoes_xp %}
                                                <option value="{{ opcao }}" {% if opcao == filtro_xp %}selected{% endif %}>{{ opcao }}</option>
                                                {% endfor %}
                                            </select>
                                        </div>
                                    </th>
                                    <!-- Produto/Categoria -->
                                    <th>
                                        Produto/Categoria
                                        <div class="form-group">
                                            <select id="filtro_categoria" name="filtro_categoria" class="form-control" onchange="handleDropdownChange()">
                                                <option value="">Todos</option>
                                                {% for opcao in opcoes_categoria %}
                                                <option value="{{ opcao }}" {% if opcao == filtro_categoria %}selected{% endif %}>{{ opcao }}</option>
                                                {% endfor %}
                                            </select>
                                        </div>
                                    </th>
                                    <!-- Linha de Receita -->
                                    <th>
                                        Linha de Receita
                                        <div class="form-group">
                                            <select id="filtro_linha_receita" name="filtro_linha_receita" class="form-control" onchange="handleDropdownChange()">
                                                <option value="">Todos</option>
                                                {% for opcao in opcoes_linha_receita %}
                                                <option value="{{ opcao }}" {% if opcao == filtro_linha_receita %}selected{% endif %}>{{ opcao }}</option>
                                                {% endfor %}
                                            </select>
                                        </div>
                                    </th>
                                    <!-- Classe do Ativo-->
                                    <th>
                                        Classe do Ativo
                                        <div class="form-group">
                                            <select id="filtro_classe_ativo" name="filtro_classe_ativo" class="form-control" onchange="handleDropdownChange()">
                                                <option value="">Todos</option>
                                                {% for opcao in opcoes_classe_ativo %}
                                                <option value="{{ opcao }}" {% if opcao == filtro_classe_ativo %}selected{% endif %}>{{ opcao }}</option>
                                                {% endfor %}
                                            </select>
                                        </div>
                                    </th>
                                    <!-- Subclasse do Ativo -->
                                    <th>
                                        Subclasse do Ativo
                                        <div class="form-group">
                                            <select id="filtro_subclasse_ativo" name="filtro_subclasse_ativo" class="form-control" onchange="handleDropdownChange()">
                                                <option value="">Todos</option>
                                                {% for opcao in opcoes_subclasse_ativo %}
                                                <option value="{{ opcao }}" {% if opcao == filtro_subclasse_ativo %}selected{% endif %}>{{ opcao }}</option>
                                                {% endfor %}
                                            </select>
                                        </div>
                                    </th>
                                    <!-- Receita Comissões-->
                                    <th>
                                        Receita Comissões
                                        <div class="form-group">
                                            <select id="filtro_receita_comissoes" name="filtro_receita_comissoes" class="form-control" onchange="handleDropdownChange()">
                                                <option value="">Todos</option>
                                                {% for opcao in opcoes_receita_comissoes %}
                                                <option value="{{ opcao }}" {% if opcao == filtro_receita_comissoes %}selected{% endif %}>{{ opcao }}</option>
                                                {% endfor %}
                                            </select>
                                        </div>
                                    </th>                                    
                                    <!-- Receita AI-->
                                    <th>
                                        Receita AI
                                        <div class="form-group">
                                            <select name="filtro_receita_ai" id="filtro_receita_ai" class="form-control" onchange="handleDropdownChange()">
                                                <option value="">Todas</option>
                                                {% for opcao in opcoes_receita_ai %}
                                                    <option value="{{ opcao }}" {% if filtro_receita_ai == opcao %}selected{% endif %}>{{ opcao }}</option>
                                                {% endfor %}
                                            </select>
                                        </div>
                                    </th>                                    
                                    <!-- Receita Escritório-->
                                    <th>
                                        Receita Escritório
                                        <div class="form-group">
                                            <select name="filtro_receita_escritorio" id="filtro_receita_escritorio" class="form-control" onchange="handleDropdownChange()">
                                                <option value="">Todas</option>
                                                {% for opcao in opcoes_receita_escritorio %}
                                                    <option value="{{ opcao }}" {% if filtro_receita_escritorio == opcao %}selected{% endif %}>{{ opcao }}</option>
                                                {% endfor %}
                                            </select>
                                        </div>
                                    </th>
                                    <!-- Exibe a coluna "Ações" apenas para usuários Master ou Gerencial -->
                                    {% if request.user.profile.user_level == 'Master' or request.user.profile.user_level == 'Gerencial' %}
                                    <th>Ações</th>
                                    {% endif %}
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Itera sobre os registros de receita da página atual -->
                                {% for receita in page_obj %}
                                <tr id="linha-{{ receita.0|date:"Y-m-d" }}"> 
                                    <td>
                                        <!-- Exibe a data de referência como um campo editável -->
                                        <div class="editable" data-field="data_referencia">
                                            {{ receita.0|date:"M/Y"|lower }}
                                        </div>
                                        <!-- Seleção de data para modo de edição -->
                                        <select class="form-control edit-mode" data-field="data_referencia" data-original-value="{{ receita.0|date:"Y-m-d" }}" style="display:none;">
                                            {% for opcao in opcoes_periodo %}
                                            <option value="{{ opcao|date:"Y-m-d" }}" {% if opcao|date:"Y-m-d" == receita.0|date:"Y-m-d" %}selected{% endif %}>
                                                {{ opcao|date:"M/Y"|lower }}
                                            </option>
                                            {% endfor %}
                                        </select>
                                    </td>
                                    <!-- Campo de Relatório XP -->
                                    <td>
                                        <div class="editable" data-field="relatorio_xp">{{ receita.1 }}</div>
                                        <select class="form-control edit-mode" data-field="relatorio_xp" data-original-value="{{ receita.1 }}" style="display:none;">
                                            {% for opcao in opcoes_xp %}
                                            <option value="{{ opcao }}" {% if opcao == receita.1 %}selected{% endif %}>{{ opcao }}</option>
                                            {% endfor %}
                                        </select>
                                    </td>
                                    <!-- Produto Categoria -->
                                    <td>
                                        <div class="editable" data-field="produto_categoria">{{ receita.2 }}</div>
                                        <select class="form-control edit-mode" data-field="produto_categoria" data-original-value="{{ receita.2 }}" style="display:none;">
                                            {% for opcao in opcoes_categoria %}
                                            <option value="{{ opcao }}" {% if opcao == receita.2 %}selected{% endif %}>{{ opcao }}</option>
                                            {% endfor %}
                                        </select>
                                    </td>
                                    <!-- Linha de Receita -->
                                    <td>
                                        <div class="editable" data-field="linha_de_receita">{{ receita.3 }}</div>
                                        <select class="form-control edit-mode" data-field="linha_de_receita" data-original-value="{{ receita.3 }}" style="display:none;">
                                            {% for opcao in opcoes_linha_receita %}
                                            <option value="{{ opcao }}" {% if opcao == receita.3 %}selected{% endif %}>{{ opcao }}</option>
                                            {% endfor %}
                                        </select>
                                    </td>
                                    <!-- Classe do Ativo -->
                                    <td>
                                        <div class="editable" data-field="classe_do_ativo">{{ receita.4 }}</div>
                                        <select class="form-control edit-mode" data-field="classe_do_ativo" data-original-value="{{ receita.4 }}" style="display:none;">
                                            {% for opcao in opcoes_classe_ativo %}
                                            <option value="{{ opcao }}" {% if opcao == receita.4 %}selected{% endif %}>{{ opcao }}</option>
                                            {% endfor %}
                                        </select>
                                    </td>
                                    <!-- Subclasse do Ativo -->
                                    <td>
                                        <div class="editable" data-field="subclasse_do_ativo">{{ receita.5 }}</div>
                                        <select class="form-control edit-mode" data-field="subclasse_do_ativo" data-original-value="{{ receita.5 }}" style="display:none;">
                                            {% for opcao in opcoes_subclasse_ativo %}
                                            <option value="{{ opcao }}" {% if opcao == receita.5 %}selected{% endif %}>{{ opcao }}</option>
                                            {% endfor %}
                                        </select>
                                    </td>
                                    <!-- Receita Comissoes -->
                                    <td>
                                        <div class="editable" data-field="receita_comissoes">{{ receita.6 }}</div>
                                        <select class="form-control edit-mode" data-field="receita_comissoes" data-original-value="{{ receita.6 }}" style="display:none;">
                                            {% for opcao in opcoes_receita_comissoes %}
                                            <option value="{{ opcao }}" {% if opcao == receita.6 %}selected{% endif %}>{{ opcao }}</option>
                                            {% endfor %}
                                        </select>
                                    </td>
                                    <!-- Receita AI -->
                                    <td>
                                        <div class="editable" data-field="receita_ai">{{ receita.7 }}</div>
                                        <select class="form-control edit-mode" data-field="receita_ai" data-original-value="{{ receita.7 }}" style="display:none;">
                                            {% for opcao in opcoes_receita_ai %}
                                            <option value="{{ opcao }}" {% if opcao == receita.7 %}selected{% endif %}>{{ opcao }}</option>
                                            {% endfor %}
                                        </select>
                                    </td>
                                    <!-- Receita Escritório -->
                                    <td>
                                        <div class="editable" data-field="receita_escritorio">{{ receita.8 }}</div>
                                        <select class="form-control edit-mode" data-field="receita_escritorio" data-original-value="{{ receita.8 }}" style="display:none;">
                                            {% for opcao in opcoes_receita_escritorio %}
                                            <option value="{{ opcao }}" {% if opcao == receita.8 %}selected{% endif %}>{{ opcao }}</option>
                                            {% endfor %}
                                        </select>
                                    </td>
                                    <!-- Botões de ação para edição, salvar, cancelar e excluir receita para usuários Master ou Gerencial-->
                                    {% if request.user.profile.user_level == 'Master' or request.user.profile.user_level == 'Gerencial' %}
                                    <td>
                                        <div class="btn-group" role="group" aria-label="Ações">
                                            <a href="#" class="btn btn-primary btn-sm btn-editar" data-id="{{ receita.0 }}">Editar</a>
                                            <button class="btn btn-success btn-sm btn-save" data-id="{{ receita.0 }}" style="display:none;">Salvar</button>
                                            <a href="#" class="btn btn-secondary btn-sm btn-cancelar" data-id="{{ receita.0 }}" style="display:none;">Cancelar</a>
                                            <a href="#" 
                                               class="btn btn-danger btn-sm btn-excluir-matriz-receita" 
                                               data-id="{{ receita.0|date:"Y-m-d" }}"
                                               onclick="return confirm('Tem certeza que deseja excluir esta receita da matriz?');">Excluir</a>
                                        </div>
                                    </td>
                                    {% endif %}
                                </tr>
                                {% empty %}
                                <!-- Exibe mensagem quando não há receitas para o período atual -->
                                <tr>
                                    <td colspan="10">Nenhuma receita encontrada.</td>
                                </tr>
                                {% endfor %}
                            </tbody>                
                        </table>
                        <!-- Campo oculto para manter a query de busca -->
                        <input type="hidden" name="search" value="{{ search_query }}">
                    </form>
                </div>
            </div>

            <!-- Paginação da Tabela -->
            <nav aria-label="Tabela de paginação">
                <ul class="pagination justify-content-center">
                    {% if page_obj.has_previous %}
                        <li class="page-item">
                            <a class="page-link" href="?{% if search_query %}search={{ search_query }}&{% endif %}{% for field, value in request.GET.items %}{% if field != 'page' %}{{ field }}={{ value }}&{% endif %}{% endfor %}page=1">Primeira</a>
                        </li>
                        <li class="page-item">
                            <a class="page-link" href="?{% if search_query %}search={{ search_query }}&{% endif %}{% for field, value in request.GET.items %}{% if field != 'page' %}{{ field }}={{ value }}&{% endif %}{% endfor %}page={{ page_obj.previous_page_number }}">Anterior</a>
                        </li>
                    {% endif %}
            
                    <li class="page-item disabled">
                        <span class="page-link">Página {{ page_obj.number }} de {{ page_obj.paginator.num_pages }}</span>
                    </li>
            
                    {% if page_obj.has_next %}
                        <li class="page-item">
                            <a class="page-link" href="?{% if search_query %}search={{ search_query }}&{% endif %}{% for field, value in request.GET.items %}{% if field != 'page' %}{{ field }}={{ value }}&{% endif %}{% endfor %}page={{ page_obj.next_page_number }}">Próxima</a>
                        </li>
                        <li class="page-item">
                            <a class="page-link" href="?{% if search_query %}search={{ search_query }}&{% endif %}{% for field, value in request.GET.items %}{% if field != 'page' %}{{ field }}={{ value }}&{% endif %}{% endfor %}page={{ page_obj.paginator.num_pages }}">Última</a>
                        </li>
                    {% endif %}
                </ul>
            </nav>
        </div>

        <!-- Aba Repasses Contratuais -->
        <div class="tab-pane fade" id="repasses" role="tabpanel" aria-labelledby="repasses-tab">
            <!-- Título da Seção -->
            <h3>Repasses Contratuais</h3>
            <div class="table-responsive">

                <!-- Formulário para Filtro de Período -->
                <form id="filtroForm" method="GET">
                    <div class="form-group">
                        <label for="filtro_periodo_repasse">Período:</label>
                        <select id="filtro_periodo_repasse" name="filtro_periodo_repasse" class="form-control" onchange="this.form.submit()" style="width: auto; min-width: 180px;">
                            <!-- Opção padrão do filtro -->
                            <option value="">Escolha um período</option> <!-- Opção padrão -->
                            <!-- Popula o filtro com opções de períodos disponíveis -->
                            {% for data in opcoes_periodo_repasse %}
                                <option value="{{ data|date:'Y-m-01' }}" {% if data == filtro_periodo_repasse %}selected{% endif %}>
                                    {{ data|date:"M/Y" }}
                                </option>
                            {% endfor %}
                        </select>
                    </div>
                </form>

                <!-- Botão de Cadastro Condicional -->
                {% if request.user.profile.user_level == 'Master' or request.user.profile.user_level == 'Gerencial' %}
                <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addRepasseModal">
                    Cadastrar
                </button>
                {% endif %}

                <!-- Tabela de Repasses Contratuais -->
                <table class="table table-striped table-bordered full-width-table matriz-receitas-table">
                    <thead>
                        <tr>
                            <th>Data Referência</th>
                            <th class="text-center">Categoria Produto XP</th>
                            <th class="text-center">Repasse Bruto</th>
                            <th class="text-center">Fee Fixo</th>
                            <th class="text-center">Fee Fixo Ex RV</th>
                            <!-- Coluna de Ações Condicional aparecendo somente para usuários Master ou Gerencial-->
                            {% if request.user.profile.user_level == 'Master' or request.user.profile.user_level == 'Gerencial' %}
                                <th>Ações</th>
                            {% endif %}
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Loop para Exibir Linhas de Repasses -->
                        {% for repasse in repasses %}
                        <tr data-id="{{ repasse.0|date:'Y-m-d' }}|{{ repasse.1 }}">
                            <!-- Coluna Data Referência -->
                            <td class="text-center">{{ repasse.0|date:"M/Y" }}</td>
                            
                            <!-- Categoria Produto XP - Dropdown -->
                            <td class="text-center">
                                <div class="editable" data-field="produto_categoria_xp">{{ repasse.1 }}</div>
                                <!-- Adicionando o campo de texto não editável, exibido apenas no modo de edição -->
                                <input type="text" class="form-control edit-mode" data-field="produto_categoria_xp" value="{{ repasse.1 }}" readonly style="display:none;">
                            </td>
                
                            <!-- Repasse Bruto - Campo Numérico -->
                            <td class="text-center">
                                <!-- Grupo de entrada com valor e símbolo de % -->
                                <div class="input-group" style="align-items: center;">
                                    <input type="text" class="form-control repasse-bruto edit-mode" value="{{ repasse.2|multiply:100 }}" readonly style="height: calc(1.5em + .75rem + 2px);">
                                    <div class="input-group-append">
                                        <span class="input-group-text" style="height: calc(1.3em + .75rem + 2px); padding-top: 0; padding-bottom: 0;">%</span>
                                    </div>
                                </div>
                            </td>
                
                            <!-- Fee Fixo - Dropdown -->
                            <td class="text-center">
                                <div class="editable" data-field="fee_fixo">{% if repasse.3 == 1 %}Sim{% else %}Não{% endif %}</div>
                                <select class="form-control edit-mode" data-field="fee_fixo" data-original-value="{{ repasse.3 }}" style="display:none;">
                                    <option value="1" {% if repasse.3 == 1 %}selected{% endif %}>Sim</option>
                                    <option value="0" {% if repasse.3 == 0 %}selected{% endif %}>Não</option>
                                </select>
                            </td>
                
                            <!-- Fee Fixo Ex RV - Dropdown -->
                            <td class="text-center">
                                <div class="editable" data-field="fee_fixo_ex_rv">{% if repasse.4 == 1 %}Sim{% else %}Não{% endif %}</div>
                                <select class="form-control edit-mode" data-field="fee_fixo_ex_rv" data-original-value="{{ repasse.4 }}" style="display:none;">
                                    <option value="1" {% if repasse.4 == 1 %}selected{% endif %}>Sim</option>
                                    <option value="0" {% if repasse.4 == 0 %}selected{% endif %}>Não</option>
                                </select>
                            </td>
                
                            <!-- Coluna de Ações Condicional aparecendo somente para usuários Master ou Gerencial-->
                            {% if request.user.profile.user_level == 'Master' or request.user.profile.user_level == 'Gerencial' %}
                            <td>
                                <div class="btn-group" role="group" aria-label="Ações">
                                    <a href="#" class="btn btn-primary btn-sm btn-editar" data-id="{{ repasse.0|date:'Y-m-d' }}">Editar</a>
                                    <button class="btn btn-success btn-sm btn-save" data-id="{{ repasse.0|date:'Y-m-d' }}" style="display:none;">Salvar</button>
                                    <a href="#" class="btn btn-secondary btn-sm btn-cancelar" data-id="{{ repasse.0|date:'Y-m-d' }}" style="display:none;">Cancelar</a>
                                    <a href="#" class="btn btn-danger btn-sm btn-excluir" data-id="{{ repasse.0|date:'Y-m-d' }}" onclick="return confirm('Tem certeza que deseja excluir?');">Excluir</a>
                                </div>
                            </td>
                            {% endif %}
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Modal para adicionar escritório -->
    <div class="modal fade" id="escritorioModal" tabindex="-1" role="dialog" aria-labelledby="escritorioModalLabel" aria-hidden="true">
        <!-- Caixa de diálogo modal de tamanho grande -->
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <!-- Cabeçalho do Modal com título e botão para fechar -->
                <div class="modal-header bg-primary text-white">
                    <h5 class="modal-title" id="escritorioModalLabel">Cadastrar Escritório</h5>
                    <button type="button" class="close text-white" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>

                <!-- Formulário para cadastrar novo escritório -->
                <form method="post" action="{% url 'cadastrar_escritorio' %}">
                    {% csrf_token %}
                    <div class="modal-body">
                        <!-- Campo para Código do Escritório -->
                        <div class="form-group">
                            <label for="codigo">Código</label>
                            <input type="text" class="form-control" id="codigo" name="codigo" maxlength="10" placeholder="Digite o código" required>
                        </div>

                        <!-- Campo para Nome do Escritório -->
                        <div class="form-group">
                            <label for="nome">Nome do Escritório</label>
                            <input type="text" class="form-control" id="nome" name="nome" maxlength="100" placeholder="Digite o nome do escritório" required>
                        </div>

                        <!-- Campo para Taxa de IR, com máscara para percentual -->
                        <div class="form-group">
                            <label for="ir">IR</label>
                            <div class="input-group" style="width: 100px;">
                                <input type="text" class="form-control" id="ir" name="ir" maxlength="5" pattern="\d{2},\d{2}" style="text-align: right;" placeholder="00,00" required>
                                <div class="input-group-append">
                                    <span class="input-group-text" style="height: 100%;">%</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Rodapé do Modal com botões de ação -->
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
                        <button type="submit" class="btn btn-primary">Salvar</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal de Exclusão de Escritório -->
    <div class="modal fade" id="excluirEscritorioModal" tabindex="-1" aria-labelledby="excluirEscritorioModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <!-- Cabeçalho com título e botão de fechar -->
                <div class="modal-header">
                    <h5 class="modal-title" id="excluirEscritorioModalLabel">Excluir Escritório</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>

                <!-- Corpo do Modal para confirmação -->
                <div class="modal-body">
                    Tem certeza de que deseja excluir este escritório?
                </div>
                <div class="modal-footer">
                    <form id="form-excluir-escritorio" method="POST" action="{% url 'excluir_escritorio' %}">
                        {% csrf_token %}
                        <input type="hidden" id="escritorio-id" name="id" value="">
                        <button type="submit" class="btn btn-danger">Excluir</button>
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal para gerar metas do próximo ano -->
    <div class="modal fade" id="gerarAnoModal" tabindex="-1" role="dialog" aria-labelledby="gerarAnoModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <!-- Cabeçalho com título e botão de fechar -->
                <div class="modal-header">
                    <h5 class="modal-title" id="gerarAnoModalLabel">Gerar Metas do Próximo Ano</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <!-- Formulário para geração de metas com opção de copiar as metas do ano anterior -->
                <form method="post" action="{% url 'gerencial_assessoria' %}">
                    {% csrf_token %}
                    <div class="modal-body">
                        <p>Você deseja gerar as metas para o próximo ano?</p>

                        <!-- Opção para copiar metas do ano anterior -->
                        <div class="form-group">
                            <label for="copiar_metas">Copiar metas do ano anterior:</label>
                            <select id="copiar_metas" name="copiar_metas" class="form-control" style="padding: .375rem .75rem; height: calc(2.25rem + 2px);">
                                <option value="sim">Sim</option>
                                <option value="nao">Não</option>
                            </select>
                        </div>
                    </div>

                    <!-- Rodapé do Modal com botões de ação -->
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Fechar</button>
                        <button type="submit" name="gerar_ano" value="gerar_ano" class="btn btn-primary">Gerar Metas</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal Adicionar Linha -->
    <!-- Este modal permite ao usuário adicionar uma nova linha com diversos campos selecionáveis e editáveis. -->
    <div class="modal fade" id="addLineModal" tabindex="-1" aria-labelledby="addLineModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <!-- Cabeçalho do modal, com título e botão para fechar -->
                <h5 class="modal-title" id="addLineModalLabel">Adicionar Nova Linha</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <!-- Formulário com campos para selecionar ou inserir informações -->
                    <form id="addLineForm">
                        <!-- Formulário com campos para selecionar ou inserir informações -->
                        <div class="mb-3">
                            <label for="nova_data_referencia" class="form-label">Data Referência</label>
                            <select class="form-control" id="nova_data_referencia" name="nova_data_referencia" required>
                                {% for data in opcoes_periodo %}
                                <option value="{{ data|date:'Y-m-d' }}">{{ data|date:"d/m/Y" }}</option>
                                {% endfor %}
                            </select>
                        </div>
                
                        <!-- Campo para selecionar ou digitar Relatório XP -->        
                        <div class="mb-3">
                            <label for="novo_relatorio_xp" class="form-label">Relatório XP</label>
                            <div class="input-group">
                                <input type="text" class="form-control" id="novo_relatorio_xp_input" placeholder="Novo valor">
                                <select class="form-control" id="novo_relatorio_xp" name="novo_relatorio_xp">
                                    <option value="">Selecione ou digite um novo valor</option>
                                    {% for opcao in opcoes_xp %}
                                        <option value="{{ opcao }}">{{ opcao }}</option>
                                    {% endfor %}
                                </select>
                            </div>
                        </div>
                        
                        <!-- Campo para selecionar ou digitar Produto Categoria -->
                        <div class="mb-3">
                            <label for="novo_produto_categoria" class="form-label">Produto/Categoria</label>
                            <div class="input-group">
                                <input type="text" class="form-control" id="novo_produto_categoria_input" placeholder="Novo valor">
                                <select class="form-control" id="novo_produto_categoria" name="novo_produto_categoria">
                                    <option value="">Selecione ou digite um novo valor</option>
                                    {% for opcao in opcoes_categoria %}
                                        <option value="{{ opcao }}">{{ opcao }}</option>
                                    {% endfor %}
                                </select>
                            </div>
                        </div>
                        
                        <!-- Campo para selecionar ou digitar Linha de Receita -->
                        <div class="mb-3">
                            <label for="nova_linha_de_receita" class="form-label">Linha de Receita</label>
                            <div class="input-group">
                                <input type="text" class="form-control" id="nova_linha_de_receita_input" placeholder="Novo valor">
                                <select class="form-control" id="nova_linha_de_receita" name="nova_linha_de_receita">
                                    <option value="">Selecione ou digite um novo valor</option>
                                    {% for opcao in opcoes_linha_receita %}
                                        <option value="{{ opcao }}">{{ opcao }}</option>
                                    {% endfor %}
                                </select>
                            </div>
                        </div>
                        
                        <!-- Campo para selecionar ou digitar Classe do Ativo -->
                        <div class="mb-3">
                            <label for="nova_classe_do_ativo" class="form-label">Classe do Ativo</label>
                            <div class="input-group">
                                <input type="text" class="form-control" id="nova_classe_do_ativo_input" placeholder="Novo valor">
                                <select class="form-control" id="nova_classe_do_ativo" name="nova_classe_do_ativo">
                                    <option value="">Selecione ou digite um novo valor</option>
                                    {% for opcao in opcoes_classe_ativo %}
                                        <option value="{{ opcao }}">{{ opcao }}</option>
                                    {% endfor %}
                                </select>
                            </div>
                        </div>
                        
                        <!-- Campo para selecionar ou digitar Subclasse do Ativo -->
                        <div class="mb-3">
                            <label for="nova_subclasse_do_ativo" class="form-label">Subclasse do Ativo</label>
                            <div class="input-group">
                                <input type="text" class="form-control" id="nova_subclasse_do_ativo_input" placeholder="Novo valor">
                                <select class="form-control" id="nova_subclasse_do_ativo" name="nova_subclasse_do_ativo">
                                    <option value="">Selecione ou digite um novo valor</option>
                                    {% for opcao in opcoes_subclasse_ativo %}
                                        <option value="{{ opcao }}">{{ opcao }}</option>
                                    {% endfor %}
                                </select>
                            </div>
                        </div>
                        
                        <!-- Campo para selecionar ou digitar Receita Comissões -->
                        <div class="mb-3">
                            <label for="nova_receita_comissoes" class="form-label">Receita Comissões</label>
                            <div class="input-group">
                                <input type="text" class="form-control" id="nova_receita_comissoes_input" placeholder="Novo valor">
                                <select class="form-control" id="nova_receita_comissoes" name="nova_receita_comissoes">
                                    <option value="">Selecione ou digite um novo valor</option>
                                    {% for opcao in opcoes_receita_comissoes %}
                                        <option value="{{ opcao }}">{{ opcao }}</option>
                                    {% endfor %}
                                </select>
                            </div>
                        </div>
                        
                        <!-- Campo para selecionar Receita AI -->
                        <div class="mb-3">
                            <label for="nova_receita_ai" class="form-label">Receita AI</label>
                            <select class="form-control" id="nova_receita_ai" name="nova_receita_ai" required>
                                {% for opcao in opcoes_receita_ai %}
                                <option value="{{ opcao }}">{{ opcao }}</option>
                                {% endfor %}
                            </select>
                        </div>
                        
                        <!-- Campo para selecionar Receita Escritório -->
                        <div class="mb-3">
                            <label for="nova_receita_escritorio" class="form-label">Receita Escritório</label>
                            <select class="form-control" id="nova_receita_escritorio" name="nova_receita_escritorio" required>
                                {% for opcao in opcoes_receita_escritorio %}
                                <option value="{{ opcao }}">{{ opcao }}</option>
                                {% endfor %}
                            </select>
                        </div>

                        <!-- Botões de Ação do modal -->
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                            <button type="button" class="btn btn-primary" id="btnSalvarNova">Salvar</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal para Adicionar Novo Repasse -->
    <!-- Este modal permite adicionar uma nova entrada de repasse com campos específicos para data, categoria, valor, e configuração de fees. -->
    <div class="modal fade" id="addRepasseModal" tabindex="-1" aria-labelledby="addRepasseModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addRepasseModalLabel">Cadastrar Novo Repasse</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="addRepasseForm">
                        <!-- Data Referência -->
                        <div class="mb-3">
                            <label for="nova_data_referencia" class="form-label">Data Referência</label>
                            <select class="form-control" id="nova_data_referencia" name="nova_data_referencia" required>
                                {% for data in opcoes_periodo %}
                                <option value="{{ data|date:'Y-m-d' }}" {% if data == periodo_mais_recente %}selected{% endif %}>
                                    {{ data|date:"M/Y" }}
                                </option>
                                {% endfor %}
                            </select>
                        </div>
    
                        <!-- Produto Categoria XP -->
                        <div class="mb-3">
                            <label for="novo_produto_categoria_xp" class="form-label">Produto/Categoria XP</label>
                            <div class="input-group">
                                <input type="text" class="form-control" id="novo_produto_categoria_xp_input" placeholder="Digite novo valor" oninput="this.value = this.value.replace(/[^A-Za-z0-9\s]/g, '');">
                                <select class="form-control" id="novo_produto_categoria_xp" name="novo_produto_categoria_xp">
                                    <option value="">Selecione ou digite um novo valor</option>
                                    {% for opcao in opcoes_categoria %}
                                        <option value="{{ opcao }}">{{ opcao }}</option>
                                    {% endfor %}
                                </select>
                            </div>
                        </div>
    
                        <!-- Repasse Bruto -->
                        <div class="mb-3">
                            <label for="novo_repasse_bruto" class="form-label">Repasse Bruto</label>
                            <input type="text" class="form-control" id="novo_repasse_bruto" name="novo_repasse_bruto" placeholder="Digite o valor" oninput="this.value = this.value.replace(/[^0-9.,]/g, '');" required>
                        </div>
    
                        <!-- Fee Fixo -->
                        <div class="mb-3">
                            <label for="novo_fee_fixo" class="form-label">Fee Fixo</label>
                            <select class="form-control" id="novo_fee_fixo" name="novo_fee_fixo" required>
                                <option value="1">Sim</option>
                                <option value="0">Não</option>
                            </select>
                        </div>
    
                        <!-- Fee Fixo Ex RV -->
                        <div class="mb-3">
                            <label for="novo_fee_fixo_ex_rv" class="form-label">Fee Fixo Ex RV</label>
                            <select class="form-control" id="novo_fee_fixo_ex_rv" name="novo_fee_fixo_ex_rv" required>
                                <option value="1">Sim</option>
                                <option value="0">Não</option>
                            </select>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-primary" id="btnSalvarRepasse">Salvar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Confirmação -->
    <div class="modal fade" id="confirmarReplicacaoModal" tabindex="-1" aria-labelledby="confirmarReplicacaoLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="confirmarReplicacaoLabel">Confirmação de Replicação</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body" id="confirmarReplicacaoMensagem">
                    <!-- Mensagem será atualizada via JavaScript -->
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Não</button>
                    <button type="button" class="btn btn-primary" id="confirmar-replicacao">Sim</button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Inclusão de arquivos JS para funcionamento do modal e funcionalidade de Bootstrap -->
{% block extra_js %}
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="{% static 'js/gerencial-assessoria.js' %}"></script>
{% endblock %}
{% endblock %}